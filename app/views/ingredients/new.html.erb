<%= render partial: 'layouts/errors', locals: {object: @ingredient}  %>

<%= form_for(@ingredient) do |f|%>
  <%= f.label :id, "Select an Ingredient" %>
  <%= f.collection_select :id, Ingredient.all, :id, :name, include_blank: true %>

  <%= f.label :name, "Or create a new ingredient" %>
  <%= f.text_field :name %>
  
  <%= f.fields_for :recipe_ingredients do |recipe_ingredient| %>
    <% if params[:recipe_id] %>
      <%= recipe_ingredient.hidden_field :recipe_id %>
    <% else %>
      <div>
        <%= recipe_ingredient.label :recipe_id, "Select a Recipe" %>
        <%= recipe_ingredient.collection_select :recipe_id, Recipe.all, :id, :name, include_blank: true %>
      </div>
    <% end %>
    <div>
      <%= recipe_ingredient.label :quantity %>
      <%= recipe_ingredient.text_field :quantity %>
    </div>
  <% end %>
  <br>

  <%= f.submit "Add ingredient" %>

<% end %>
